<testcase>
  <annotation>
    <![CDATA[
      <title>DataSource Tests</title>
      <para>
        This series of tests excersize the JDBC DataSourceComponent provided by
        Excalibur.  The configuration is specified in the file located in
        <parameter>jakarta-avalon-excalibur/src/scratchpad/org/apache/avalon/excalibur/datasource/test/DataSourceTest.xtext</parameter>.
        You may edit the test to customize the settings.
      </para>
    ]]>
  </annotation>

  <logkit>
    <factories>
      <factory type="stream" 
               class="org.apache.avalon.excalibur.logger.factory.StreamTargetFactory"/>
      <factory type="file" class="org.apache.avalon.excalibur.logger.factory.FileTargetFactory"/>
    </factories>

    <targets>
      <stream id="console">
        <stream>System.out</stream>
        <format type="avalon">
          %7.7{priority} %5.5{time}   [%8.8{category}] (%{context}): %{message}\n%{throwable}
        </format>
      </stream>
      <file id="file">
        <filename>TEST-org.apache.avalon.excalibur.datasource.test.DataSourceTestCase.log</filename>
        <format type="extended">
          %7.7{priority} %5.5{time}   [%8.8{category}] (%{context}): %{message}\n%{throwable}
        </format>
      </file>
    </targets>

    <categories>
      <category name="test" log-level="INFO">
        <log-target id-ref="console"/>
        <log-target id-ref="file"/>
      </category>
    </categories>
  </logkit>
    
  <logkit>
    <factories>
      <factory type="file" class="org.apache.avalon.excalibur.logger.factory.FileTargetFactory"/>
    </factories>

    <targets>
       <file id="root">
        <filename>datasource-test.log</filename>
        <format type="extended">
          %7.7{priority} %5.5{time}   [%8.8{category}] (%{context}): %{message}\n%{throwable}
        </format>
       </file>
     </targets>

     <categories>
       <category name="test" log-level="DEBUG">
         <log-target id-ref="root"/>
       </category>
     </categories>
  </logkit>

  <roles>
    <role name="org.apache.avalon.excalibur.datasource.DataSourceComponent"
          shorthand="datasource"
          default-class="org.apache.avalon.excalibur.datasource.JdbcDataSource"/>
  </roles>

  <!--
    It is critical that you have a monitor by the name "active" and the
    name "passive"
  -->
  <components>
    <datasource logger="test">
      <pool-controller min="5" max="10"/>
      <driver>@test.jdbc.driver@</driver>
      <dburl>@test.jdbc.url@</dburl>
      <user>@test.jdbc.user@</user>
      <password>@test.jdbc.password@</password>
    </datasource>
  </components>
</testcase>
