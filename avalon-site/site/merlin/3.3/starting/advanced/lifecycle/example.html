
  

  
  

  
  

  

  
  

  
  

  
  

  

  

  

  

  

  
  
  
  
      
  

      
      
      
      
      
      
        
         
      
      

      
      
      
      

      
      
      

      

  
  

  
  

   
   


    
	
	

    
    
      
	
	
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html>
      <head>
        
        
          <title>
            Merlin - 
          
        
          </title>
        
        
        
        <style type="text/css">
          @import url("../../../style/tigris.css");
          @import url("../../../style/maven.css");
        </style>
        
        
        
        
        
        <link rel="stylesheet" href="../../../style/print.css" type="text/css" media="print"></link>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
        
        
        
        
      </head>

      <body class="composite">

        <div id="banner">
          <table height="103" border="0" width="100%" cellpadding="8" cellspacing="0">
            <tr>
              
              <td>
                
                
                  
                  
                  
                    
                  
                  
                  
                  
                  
                  <a href="http://avalon.apache.org/">
                    <img border="0" alt="The Apache Software Foundation" src="http://avalon.apache.org/images/apache-avalon-logo.png" align="left"></img>
                  </a>
                
              </td>

              <td></td>
              

            </tr>
          </table>
        </div>
        <div id="breadcrumbs">
          <table border="0" width="100%" cellpadding="4" cellspacing="0">
            <tr>
              
              <td>
                <div align="right">
                  
                  
                  
                    
    
    
      
      
      
      <a href="http://apache.org/">Apache</a>
      
    
      |
      
      
      <a href="http://avalon.apache.org/">Avalon</a>
      
    
      |
      
      
      <a href="http://avalon.apache.org/product/framework/">Framework</a>
      
    
      |
      
      
      <a href="http://avalon.apache.org/product/containers/">Merlin</a>
      
    
      |
      
      
      <a href="http://avalon.apache.org/product/components/">Planet</a>
      
    
  
                  
                  
                </div>
              </td>
            </tr>
          </table>
        </div>
        
        <table border="0" width="100%" cellpadding="8" cellspacing="0"> 
          <tr valign="top">
            <td width="20%" id="leftcol">
              <div id="navcolumn">
                

                
                  
    <div>
      <strong>About Merlin</strong>
      
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../about/index.html">Overview</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/index.html">Getting Started</a>
      	
      </small>
	  
        
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/installation/index.html">Installation</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/tutorial/index.html">Using Merlin</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/index.html">Advanced Features</a>
      	
      </small>
	  
        
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/lifecycle/index.html">Lifecycle Tools</a>
      	
      </small>
	  
        
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/lifecycle/extension.html">Overview</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/lifecycle/interfaces.html">Interfaces</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      		<b><a href="../../../starting/advanced/lifecycle/example.html">Example</a></b>
      	
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/context.html">Contextualization</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/profiles.html">Deployment Templates</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/selection.html">Profile Selection</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../starting/advanced/composite.html">Composition</a>
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../merlin/index.html">Merlin System</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../extensions/index.html">Extensions</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../tools/index.html">Tools</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
    <div>
      <strong>Resources</strong>
      
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../api/index.html">Javadoc</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../reference/index.html">Specification</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../resources/download.html">Download</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../resources/roadmap/index.html">Roadmap</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../../dpml/index.html">DPML</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
    <div>
      <strong>Related Projects</strong>
      
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/meta">Meta</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/util">Utilities</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/repository">Repository</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
                
                
                
                

                
                
                <div>
                  <strong>Project Documentation</strong>
                  
                  <div>
                    <small>
                      <a href="../../../project-info.html">Project Info</a>
                    </small>
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                  </div>
                  <div>
                    <small>
                      <a href="../../../maven-reports.html">Project Reports</a>
                    </small>
                    
					
                    
                    
                      
                      
                    
                      
                      
                    
                    
                    
                    
                  </div>
                  
                    
                  
                  
                </div>
              
              
                
                
                
                
              
                
              </div>
            </td>
            <td rowspan="2">
              <div id="bodycol">
                
                <div class="app">
                  
                  
    <div class="h3">
      
      
        <h3>
          <a name="Lifecycle Tools Example">Lifecycle Tools Example</a>
        </h3>
      
      
    <div class="h4">
      
      
        <h4>
          <a name="Creating your lifestyle stage interface">Creating your lifestyle stage interface</a>
        </h4>
      
      
    <p>
      
The following interface is your domain specific lifecycle stage interface.  It is the interface that an extension handler will use to interact with your component during deployment and decommissioning.

    </p>
   
    <div id="source">
      <pre>
 public interface Exploitable
 {
    /**
     * Operation invoked by your exploitation manager.
     * @param message a message to be displayed
     */
     void exploit( String message );
 }
      </pre>
    </div>
  
    </div>
  
    <div class="h4">
      
      
        <h4>
          <a name="Create the lifestyle extension handler">Create the lifestyle extension handler</a>
        </h4>
      
      
    <p>
      
An extension handler is the implementation class that will be activated by the Merlin container to handle domain specific tasks during the deployment and decommissioning phases.  The extension can implement either or both of the Creator and Accessor interfaces depeding on the particular extension requirements.  In this example we are defining a simple creation stage handler that supplies a message to an instance of Exploitable.

    </p>
   
    <div id="source">
      <pre>
 public class ExploitationManager implements Creator
 {
    /**
     * Operation invoked by a container to request creation
     * stage extension interception.
     * @param object a component to manager
     * @param context the context
     */
     public void create( Object object, Context context )
     {
         if( object instanceof Exploitable )
         {
             ((Expoitable)object).exploit( "hello" );
         }
     }

    /**
     * Operation invoked by a container to request destroy
     * stage extension interception.
     * @param object a component to manager
     * @param context the context
     */
     public void destroy( Object object, Context context )
     {
     }
 }
      </pre>
    </div>
  
    <p>
      
To complete the definition of your extension handler you need to prepare the 
meta-info that will be used by Merlin to identify the extension and the stage 
interface it supports.  The following &lt;type/&gt; declaration includes an 
&lt;extensions/&gt; tag that contains a &lt;reference/&gt; element that 
includes the reference to the Exploitable lifecycle stage interface. This is 
the key that Merlin uses to associate a handler with a component.  If your 
extension class requires any specific context values, they should be declared 
in a &lt;context/&gt; element within the &lt;extension/&gt; element.

    </p>
   
    <div id="source">
      <pre>
&lt;type&gt;

   &lt;info&gt;
      &lt;name&gt;my-extension-handler&lt;/name&gt;
   &lt;/info&gt;

   &lt;extensions&gt;
     &lt;extension type="Exploitable"/&gt;
   &lt;/extensions&gt;

&lt;/type&gt;
</pre>
    </div>
  
    </div>
  
    <div class="h4">
      
      
        <h4>
          <a name="Create a component implementing the stage interface">Create a component implementing the stage interface</a>
        </h4>
      
      
    <div id="source">
      <pre>
 public class MyComponent extends AbstractLogEnabled implements Exploitable
 {
    /**
     * Operation invoked by an exploitation manager.
     * @param message a message to be displayed
     */
     public void exploit( String message )
     {
         getLogger().info( message );
     }
 }
      </pre>
    </div>
  
    <p>
      
To complete the defintion of your component you need to prepare the meta-info 
that will be used by Merlin to identify the stage interface it requires a 
handler for.  The following &lt;type/&gt; declaration includes a 
&lt;stage/&gt; tag that contains a &lt;reference/&gt; element that includes 
a reference to the Exploitable lifecycle stage interface. This is the key that 
Merlin uses to associate the component with a handler capable of handling the 
Exploitable interface.

    </p>
   
    <div id="source">
      <pre>
&lt;type&gt;

   &lt;info&gt;
      &lt;name&gt;my-component&lt;/name&gt;
   &lt;/info&gt;

   &lt;stages&gt;
     &lt;stage type="Exploitable"/&gt;
   &lt;/stages&gt;

&lt;/type&gt;

</pre>
    </div>
  
    </div>
  
    <div class="h4">
      
      
        <h4>
          <a name="Execution">Execution</a>
        </h4>
      
      
    <p>
      To execute the example you simply need to include a reference to your 
component within a Merlin container declaration.  The following XML source 
declares a Merlin kernel, container, and component.  You don't need to include 
the handler because Merlin can sort that out itself based on the information 
supplied in the meta-info declarations.
    </p>
   
    <div id="source">
      <pre>

     &lt;component name="demo" class="MyComponent" activation="startup"/&gt;

</pre>
    </div>
  
    </div>
  
    </div>
  
                  
                  
                  
                  
                  
                </div>
              </div>
            </td>
          </tr>
        </table>
        <div id="footer">
          <table border="0" style="width:100%" cellpadding="4" cellspacing="0">
            
            <tr>
              <td>
                
                  
                    
                    
                      © 1997-2004, The Apache Software Foundation
                    
                  
                  
                

                
              </td>
              
            </tr>
          </table>
        </div>
      </body>
    </html>
  