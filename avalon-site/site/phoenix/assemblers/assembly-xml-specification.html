<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--*** This is a generated file.  Do not edit.  ***-->
<link rel="stylesheet" href="../skin/tigris.css" type="text/css">
<link rel="stylesheet" href="../skin/mysite.css" type="text/css">
<link rel="stylesheet" href="../skin/site.css" type="text/css">
<link media="print" rel="stylesheet" href="../skin/print.css" type="text/css">
<title>Specification of assembly.xml </title>
</head>
<body bgcolor="white" class="composite">
<!--================= start Banner ==================-->
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" summary="banner" border="0">
<tbody>
<tr>
<!--================= start Group Logo ==================-->
<td align="left">
<div class="groupLogo">
<a href="http://avalon.apache.org/"><img border="0" class="logoImage" alt="Apache Avalon-Phoenix" src="../images/apache-avalon-logo.png"></a>
</div>
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td align="right">
<div class="projectLogo">
<a href="http://apachecon.com/2003/US/index.html"><img border="0" class="logoImage" alt="Visit ApacheCon 2003!" src="http://www.apache.org/~ceki/ac2003/ac2003-150.gif"></a>
</div>
</td>
<!--================= end Project Logo ==================-->
</tr>
</tbody>
</table>
</div>
<!--================= end Banner ==================-->
<!--================= start Main ==================-->
<table width="100%" cellpadding="0" cellspacing="0" border="0" summary="nav" id="breadcrumbs">
<tbody>
<!--================= start Status ==================-->
<tr class="status">
<td>
<!--================= start BreadCrumb ==================--><a href="http://www.apache.org/">Apache Main</a> | <a href="http://avalon.apache.org/">Avalon Main</a> | <a href="../">Up</a>
<!--================= end BreadCrumb ==================--></td><td id="tabs">
<!--================= start Tabs ==================-->
<div class="tab">
<span class="unselectedTab"><a href="http://www.apache.org/">Apache</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/">Avalon</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/product/framework/">Framework</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/product/containers/">Containers</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/product/components/">Components</a></span>
</div>
<!--================= end Tabs ==================-->
</td>
</tr>
</tbody>
</table>
<!--================= end Status ==================-->
<table id="main" width="100%" cellpadding="8" cellspacing="0" summary="" border="0">
<tbody>
<tr valign="top">
<!--================= start Menu ==================-->
<td id="leftcol">
<div id="navcolumn">
<div class="menuBar">
<div class="menu">
<span class="menuLabel">Essentials</span>

<div class="menuItem">
<a href="../index.html">Overview</a>
</div>

<div class="menuItem">
<a href="../features.html">Features</a>
</div>

<div class="menuItem">
<a href="../getting-started.html">Getting started</a>
</div>

<div class="menuItem">
<a href="http://avalon.apache.org/bindownload.cgi">Download</a>
</div>

<div class="menuItem">
<a href="../install.html">Install</a>
</div>

</div>
<div class="menu">
<span class="menuLabel">Guide</span>

<div class="menuItem">
<a href="../guide-architecture.html">Architectural Overview</a>
</div>

<div class="menuItem">
<a href="../guide-roles.html">Development Roles</a>
</div>

<div class="menuItem">
<a href="../guide-administrator.html">for Administrators</a>
</div>

<div class="menuItem">
<a href="../guide-deployers.html">for Deployers</a>
</div>

<div class="menuItem">
<a href="../assemblers/index.html">for Assemblers</a>
</div>

<div class="menuItem">
<a href="../bdg/index.html">for Block Developers</a>
</div>

<div class="menuItem">
<a href="../mx/index.html">Management Guide</a>
</div>

<div class="menuItem">
<a href="../guide-example-configuration.html">Example configuration</a>
</div>

<div class="menuItem">
<a href="../guide-punit.html">PUnit unit testing</a>
</div>

</div>
<div class="menu">
<span class="menuLabel">Reference</span>

<div class="menuItem">
<a href="../api/index.html">API Docs</a>
</div>

<div class="menuItem">
<a href="../assemblers/config-xml-specification.html">config.xml Specification</a>
</div>

<div class="menuItem">
<span class="menuSelected">assembly.xml Specification</span>
</div>

<div class="menuItem">
<a href="../assemblers/environment-xml-specification.html">environment.xml Specification</a>
</div>

<div class="menuItem">
<a href="../bdg/blockinfo-specification.html">BlockInfo Specification</a>
</div>

</div>
<div class="menu">
<span class="menuLabel">For Developers</span>

<div class="menuItem">
<a href="../changes.html">Changes</a>
</div>

<div class="menuItem">
<a href="http://avalon.apache.org/code-standards.html">Coding standards</a>
</div>

<div class="menuItem">
<a href="../for-developers-project-structure.html">Project Structure</a>
</div>

<div class="menuItem">
<a href="http://jakarta.apache.org/site/cvsindex.html">CVS Repositories</a>
</div>

<div class="menuItem">
<a href="http://jakarta.apache.org/site/mail.html">Mailing Lists</a>
</div>

<div class="menuItem">
<a href="http://nagoya.apache.org/bugzilla/buglist.cgi?bug_status=UNCONFIRMED&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=RESOLVED&product=Avalon&component=Phoenix">TODO</a>
</div>

<div class="menuItem">
<a href="http://jira.werken.com/secure/BrowseProject.jspa?id=10081">Issue Tracker (Bug and Enhancement List)</a>
</div>

<div class="menuItem">
<a href="../for-developers-alternate-kernel.html">Alternate Kernels</a>
</div>

</div>
</div>
</div>
</td>
<!--================= end Menu ==================-->
<!--================= start Content ==================--><td>
<div id="bodycol">
<div class="app">
<div align="center">
<h1>Specification of assembly.xml </h1>
</div>
<div class="h3">
    
    
        
<div class="h3">
<h3>The Assembly File</h3>
</div>
            
<p>
                The <span class="codefrag">assembly.xml</span> file defines how to assemble the
                application.  It defines the blocks that make up the application,
                and how to connect them together.  It also defines the
                application listeners to include in the application.
            </p>

            
<p>
                In previous versions of Phoenix, configuration data was also
                stored in the assembly file.  This is no longer the case;
                Configuration is now stored in a separate
                <a href="/assemblers/config-xml-specification.html">Configuration File</a>.
            </p>

            
<p>
                The root element of the assembly file must be an
                <span class="codefrag">&lt;assembly&gt;</span> element.  The root element
                must contain a child element for each block and application
                listener which is part of the application.  These elements
                are described below.
            </p>
        

        
<div class="h3">
<h3>The &lt;block&gt; Element</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;block&gt;</span> element defines a block, and
                how to provide services to the block.  The
                <span class="codefrag">&lt;block&gt;</span> element takes the following
                attributes:
            </p>

            
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                
<tr class="b">
<th colspan="1" rowspan="1">Attribute</th><th colspan="1" rowspan="1">Description</th>
</tr>
                
<tr class="a">
                    
<td colspan="1" rowspan="1">class</td>
                    <td colspan="1" rowspan="1">
                        The fully-qualified name of the block's implementing class.
                        This class must be public, with a public no-args
                        constructor.  There must be a corresponding
                        <a href="/bdg/blockinfo-specification.html">BlockInfo</a>
                        file for the class.
                    </td>
                
</tr>
                
<tr class="b">
                    
<td colspan="1" rowspan="1">name</td>
                    <td colspan="1" rowspan="1">
                        A unique name for the block.  This name is used to
                        refer to the block in other parts of the assembly file,
                        and in the configuration file.  The block name may
                        only contain letters, digits, '-' and '.'.
                    </td>
                
</tr>
            
</table>

            
<div class="h4">
<h4>The &lt;provide&gt; Element</h4>
</div>
                
<p>
                    The <span class="codefrag">&lt;provide&gt;</span> element defines how to
                    provide a particular service to the block.  It connects
                    the block to another block that provides the required service.
                    There must be at least one <span class="codefrag">&lt;provide&gt;</span>
                    element for each dependency listed in the block's
                    <a href="/bdg/blockinfo-specification.html">BlockInfo</a>
                    file.  For array and mapped services, there may be more than
                    one <span class="codefrag">&lt;provide&gt;</span> element for each
                    dependency.  The <span class="codefrag">&lt;provide&gt;</span> element takes
                    the following attributes:
                </p>

                
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                    
<tr class="b">
<th colspan="1" rowspan="1">Attribute</th><th colspan="1" rowspan="1">Description</th>
</tr>
                    
<tr class="a">
                        
<td colspan="1" rowspan="1">alias</td>
                        <td colspan="1" rowspan="1">
                            The key to use for the service, for mapped services.
                            Defaults to the value of the <span class="codefrag">name</span>
                            attribute.
                        </td>
                    
</tr>
                    
<tr class="b">
                        
<td colspan="1" rowspan="1">name</td>
                        <td colspan="1" rowspan="1">
                            The name of the block to use to provide the service
                            to the target block.  This must refer to another
                            block in the same application.
                        </td>
                    
</tr>
                    
<tr class="a">
                        
<td colspan="1" rowspan="1">role</td>
                        <td colspan="1" rowspan="1">
                            The role of the service.  This must refer to
                            one of the dependencies listed in the block's
                            BlockInfo file.  The service name and version
                            specified by the dependency must match one of the
                            services listed in the provider block's
                            BlockInfo file.
                        </td>
                    
</tr>
                
</table>
            

            
<div class="h4">
<h4>The &lt;proxy&gt; Element</h4>
</div>
                
<p>
                    The <span class="codefrag">&lt;proxy&gt;</span> element controls whether
                    Phoenix will wrap the block with a proxy object before
                    supplying it to other blocks.  The <span class="codefrag">&lt;proxy&gt;</span>
                    element takes the following attributes:
                </p>
                
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                    
<tr class="b">
<th colspan="1" rowspan="1">Attribute</th><th colspan="1" rowspan="1">Description</th>
</tr>
                    
<tr class="a">
                        
<td colspan="1" rowspan="1">disable</td>
                        <td colspan="1" rowspan="1">Disables the use of a proxy object.  Default is false.</td>
                    
</tr>
                
</table>
            
        

        
<div class="h3">
<h3>The &lt;listener&gt; Element</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;listener&gt;</span> element defines an application
                listener.  The <span class="codefrag">&lt;listener&gt;</span> element takes the
                following attributes:
            </p>
            
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                
<tr class="b">
<th colspan="1" rowspan="1">Attribute</th><th colspan="1" rowspan="1">Description</th>
</tr>
                
<tr class="a">
                    
<td colspan="1" rowspan="1">class</td>
                    <td colspan="1" rowspan="1">
                        The fully qualified name of the listener class.
                        This class must be public and provide a public
                        no-args constructor.  It must implement the
                        <span class="codefrag">org.apache.avalon.phoenix.ApplicationListener</span>
                        interface.
                    </td>
                
</tr>
                
<tr class="b">
                    
<td colspan="1" rowspan="1">name</td>
                    <td colspan="1" rowspan="1">
                        A unique name for the listener, which is used to
                        refer to the listener in the configuration file.
                        The name may only contain letters, digits, '-' and '.'.
                    </td>
                
</tr>
            
</table>
        

        
<div class="h3">
<h3>The &lt;block-listener&gt; Element (Deprecated)</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;block-listener&gt;</span> element defines
                a block listener.  Note that the use of block listeners
                is deprecated.  The <span class="codefrag">&lt;block-listener&gt;</span> element
                takes the same attributes as the <span class="codefrag">&lt;listener&gt;</span>
                element.
            </p>
        

        
<div class="h3">
<h3>Sample Assembly File</h3>
</div>
            
            
<p>
                Below is an example assembly file.  It defines 2 blocks, called
                <span class="codefrag">myAuthorizer</span> and <span class="codefrag">myBlock</span>, and a
                listener.  Block <span class="codefrag">myBlock</span> uses the
                <span class="codefrag">Authorizer</span> service provided by block
                <span class="codefrag">myAuthorizer</span>.
            </p>

            
<pre class="code">

&lt;?xml version="1.0"?&gt;

&lt;assembly&gt;

    &lt;block name="myAuthorizer"
           class="com.biz.cornerstone.blocks.MyAuthorizer"&gt;
    &lt;/block&gt;

    &lt;block name="myBlock"
           class="com.biz.cornerstone.blocks.MyBlock"&gt;
        &lt;provide name="myAuthorizer"
                 role="com.biz.cornerstone.services.Authorizer"/&gt;
    &lt;/block&gt;

    &lt;listener name="myListener"
              class="com.biz.cornerstone.listeners.MyListener"&gt;
    &lt;/listener&gt;

&lt;/assembly&gt;
            </pre>
        
    

<div id="authors" align="right">by&nbsp;Peter Donald</div>
</div>
</div>
</div>
</td>
<!--================= end Content ==================-->
</tr>
</tbody>
</table>
<!--================= end Main ==================-->
<!--================= start Footer ==================-->
<div id="footer">
<table summary="footer" cellspacing="0" cellpadding="4" width="100%" border="0">
<tbody>
<tr>
<!--================= start Copyright ==================-->
<td colspan="2">
<div align="center">
<div class="copyright">
              Copyright &copy; 2002-2003&nbsp;The Apache Software Foundation.. All rights reserved.
            </div>
</div>
</td>
<!--================= end Copyright ==================-->
</tr>
<tr>
<td align="left">
<!--================= start Host ==================-->
<!--================= end Host ==================--></td><td align="right">
<!--================= start Credits ==================-->
<div align="right">
<div class="credit"></div>
</div>
<!--================= end Credits ==================-->
</td>
</tr>
</tbody>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
