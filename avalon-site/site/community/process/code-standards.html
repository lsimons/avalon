
  

  
  

  
  

  

  
  

  
  

  
  

  

  

  

  

  

  
  
  
  
      
  

      
      
      
      
      
      
        
         
      
      

      
      
      
      

      
      
      

      

  
  

  
  

   
   


    
	
	

    
    
      
	
	
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html>
      <head>
        
        
          <title>
            Apache Avalon - 
          Apache Avalon: Coding Standards
        
          </title>
        
        
        
        <style type="text/css">
          @import url("../../style/tigris.css");
          @import url("../../style/maven.css");
        </style>
        
        
        
        
        
        <link rel="stylesheet" href="../../style/print.css" type="text/css" media="print"></link>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
        
          <meta name="author" content="Avalon Documentation Team"></meta>
          <meta name="email" content="dev@avalon.apache.org"></meta>
        
        
        
        
      </head>

      <body class="composite">

        <div id="banner">
          <table height="103" border="0" width="100%" cellpadding="8" cellspacing="0">
            <tr>
              
              <td>
                
                
                  
                  
                  
                    
                  
                  
                  
                  
                  
                    
                  
                  <a href="http://avalon.apache.org/">
                    <img border="0" alt="The Apache Avalon Project" src="../../images/apache-avalon-logo.png" align="left"></img>
                  </a>
                
              </td>

              <td></td>
              

            </tr>
          </table>
        </div>
        <div id="breadcrumbs">
          <table border="0" width="100%" cellpadding="4" cellspacing="0">
            <tr>
              
                
                <td>Last published: 23 December 2003
                  
                </td>
              
              <td>
                <div align="right">
                  
                  
                  
                    
    
    
      
      
      
      <a href="http://apache.org/">Apache</a>
      
    
      |
      
      
      <a href="../../index.html">Avalon</a>
      
    
      |
      
      
      <a href="../../product/framework/index.html">Framework</a>
      
    
      |
      
      
      <a href="../../product/containers/index.html">Containers</a>
      
    
      |
      
      
      <a href="../../product/components/index.html">Components</a>
      
    
  
                  
                  
                </div>
              </td>
            </tr>
          </table>
        </div>
        
        <table border="0" width="100%" cellpadding="8" cellspacing="0"> 
          <tr valign="top">
            <td width="20%" id="leftcol">
              <div id="navcolumn">
                

                
                  
    <div>
      <strong>About Avalon</strong>
      
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../index.html">Overview</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../news.html">Latest News</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/index.html">Community</a>
      	
      </small>
	  
        
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/who/index.html">Who We Are</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/process/index.html">Process</a>
      	
      </small>
	  
        
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/process/mission.html">Project Charter</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/process/pmc.html">Management Committee</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/process/pmc-votes.html">PMC Procedures</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      		<b><a href="../../community/process/code-standards.html">Coding Standards</a></b>
      	
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/process/release.html">Release Management</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/process/patches.html">Patches and Bugs</a>
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../community/history/index.html">History</a>
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../product/index.html">Products</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../doc/index.html">Documentation</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
    <div>
      <strong>Resources</strong>
      
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../license.html">License</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../download.cgi">Downloads</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../cvs.html">CVS</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://wiki.apache.org/avalon">WIKI</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../sandbox/index.html">Sandbox</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../mailing-lists.html">Mailing Lists</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://nagoya.apache.org/bugzilla/reports.cgi?product=Avalon&amp;output=most_doomed&amp;links=1&amp;banner=1&amp;quip=0">Bug Database</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="../../related/index.html">Related Projects</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
    <div>
      <strong>Related</strong>
      
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/framework">Framework</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/meta">Meta</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/util">Utilities</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/repository">Repository</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    

    <div>
      <small>
      	
      	
      		<a href="http://avalon.apache.org/merlin">Merlin</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
                
                
                
                

                
                
              
                
                
                
                
              
                
              </div>
            </td>
            <td rowspan="2">
              <div id="bodycol">
                
                <div class="app">
                  
                  
    <div class="h3">
      
      
        <h3>
          <a name="Coding Standards">Coding Standards</a>
        </h3>
      
      
    <p>
      This document describes a list of coding conventions that are required
 for code submissions to the project. By default, the coding conventions
 for most Open Source projects should follow the existing coding conventions
 in the code that you are working on. For example, if the bracket is on
 the same line as the if statement, then you should write all your code
 to follow that convention.
    </p>
   
    <p>
      
    <strong>
      Please follow these conventions closely. It makes life so much
easier.
    </strong>
   
    </p>
   
    <p>
      Brackets should begin and end on a new line. Examples:
    </p>
   
    <div id="source">
      <pre>

if( foo )
{
    // code here
}

try
{
    // code here
}
catch( final Exception bar )
{
    // code here
}
finally
{
    // code here
}

while( true )
{
    // code here
}

</pre>
    </div>
  
    <p>
      The preference is to include extra spaces between parenthesis and expression.
For example;

    </p>
   
    <div id="source">
      <pre>

if( foo )

</pre>
    </div>
  
    <p>
      4 spaces. 
    <strong>
      NO
    </strong>
    tabs. Period. We understand that a lot of you like
to use tabs, but the fact of the matter is that in a distributed development
environment, when the cvs commit messages get sent to a mailing list, they
are almost impossible to read if you use tabs.
    </p>
   
    <p>
      In Emacs-speak, this translates to the following command:
    </p>
   
    <div id="source">
      <pre>(setq-default tab-width 4 indent-tabs-mode nil)</pre>
    </div>
  
    <p>
      In vim, having the following in your .vimrc will help:
    </p>
   
    <div id="source">
      <pre>
set tabstop=4
set expandtab
set list
set listchars=tab:&gt;.
</pre>
    </div>
  
    <p>
      Unix linefeeds for all .java source code files. Other platform specific
files should have the platform specific linefeeds.
    </p>
   
    <p>
      Javadoc 
    <strong>
      SHOULD
    </strong>
    exist on all your methods. Also, if you are working
on existing code and there currently isn't a javadoc for that method/class/variable
or whatever, then you should contribute and add it. This will improve the
project as a whole.
    </p>
   
    <p>
      The Jakarta Apache/Avalon License 
    <strong>
      MUST
    </strong>
    be placed at the top
of each and every file.
    </p>
   
    <p>
      If you contribute to a file (code or documentation), add yourself to the
top of the file. For .java files the preferred Javadoc format is:
    </p>
   
    <div id="source">
      <pre>
@author &lt;a href="mailto:user@domain.com"&gt;John Doe&lt;/a&gt;
</pre>
    </div>
  
    <p>
      Indent comments on an 80 column basis and the code on a
 100 column basis, using two more indents when a line must be wrapped.
    </p>
   
    <p>
      We focus on readability over performance, at least initially. Source code
optimization is the last thing to be done to increase performance.
If the code is not performing then it is better to re-engineer it rather
than to expand loops, take out variable declarations etc. When the code
is stable and has a well defined purpose and interface it may be appropriate
to do source code optimization.
    </p>
   
    <p>
      Try to javadoc all methods and variables, especially public, protected
and default access methods and member variables. Also add code comments
when you think it's necessary (like assumptions).
    </p>
   
    <p>
      Variables are declared in the inner scope.
    </p>
   
    <div id="source">
      <pre>
while( myListIterator.hasNext() )
{
    final String myString = (String)myListIterator.next();
}
</pre>
    </div>
  
    <p>
      Variables should be descriptive and ideally English words. The exceptions
being loop counters (usually use i, j and k), exceptions (use concatenation
of word separating characters - i.e. SocketException is abbreviated as se) and
other commonly used abbreviations (i.e. sb for StringBuffer).
    </p>
   
    <div id="source">
      <pre>
try
{
    for( int i = 0; i &lt; 10; i++ )
    {
        // some stuff
    }
}
catch( final FileNotFoundException fnfe )
{
    // some stuff
}
catch( final IndexOutOfBoundsException ioobe )
{
    // some stuff
}
</pre>
    </div>
  
    <p>
      
Use String concatenation except in extremely performance sensitive
sections. This leaves StringBuffer optimization to the compiler.
So use:
    </p>
   
    <div id="source">
      <pre>
final String myString = "test " + "for " + "performances";
</pre>
    </div>
  
    <p>
      Try not to declare a method as 'synchronized'.  If a method accesses
a shared resource then surround accesses to that resource with
a synchronized block. Ideally the synchronized block should surround
the smallest possible area. For example:
    </p>
   
    <div id="source">
      <pre>
public void sharedMethod()
{
    String display = null;

    synchronized( this )
    {
        display = mySharedObject.getHelloWorld();
    }

    System.out.println( display );
}
</pre>
    </div>
  
    <p>
      If you are within a static method, then you may have to create
a static object whose sole purpose in life is to provide the
lock you need. Alternatively you could use the Class object for
the class you are in. That is, if you're in class MyClass, use
"MyClass.class".
    </p>
   
    <p>
      Have the names of all member instance fields start with the prefix "m_".
Example:
    </p>
   
    <div id="source">
      <pre>
class MyClass
{
    Class m_class = MyClass.class;
    int m_users;
}
</pre>
    </div>
  
    <p>
      Don't chain method calls. The below:
    </p>
   
    <div id="source">
      <pre>
Thing thing = (MyThing)myObject.doSomething().doSomethingElse().getMyThing();
</pre>
    </div>
  
    <p>
      is considered bad practice because it hides problems relating to
synchronization, resource management, etc. The example above might
become:
    </p>
   
    <div id="source">
      <pre>
final MySomething something = myObject.doSomething();
final MyElse somethingElse = something.doSomethingElse();
Thing thing = somethingElse.getMyThing();
</pre>
    </div>
  
    <p>
      The extra typing will help keep the code bug-free.
    </p>
   
    <p>
      Thanks for your cooperation.
    </p>
   
    <p>
      -The Avalon Team
    </p>
   
    </div>
  
                  
                  
                  
                  
                  
                </div>
              </div>
            </td>
          </tr>
        </table>
        <div id="footer">
          <table border="0" style="width:100%" cellpadding="4" cellspacing="0">
            
            <tr>
              <td>
                
                  
                    
                    
                      © 1997-2003, The Apache Avalon Project
                    
                  
                  
                

                
              </td>
              
            </tr>
          </table>
        </div>
      </body>
    </html>
  