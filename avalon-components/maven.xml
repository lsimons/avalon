<project default="build" xmlns:maven="jelly:maven" xmlns:j="jelly:core" xmlns:util="jelly:util">
  <property file="${basedir}/project.properties"/>
  <property file="${basedir}/../project.properties"/>

  <goal name="build">
    <attainGoal name="project-install"/>
    <attainGoal name="project-site"/>
  </goal>

  <goal name="project-install" 
    description="Install the sub-project jars." >
    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      excludes="site/*.*"
      goals="jar:install"
      banner="Installing:"
      ignoreFailures="false" />
  </goal>

  <goal name="project-site" 
    description="Build the project site." >
    <maven:reactor
      basedir="${basedir}"
      includes="site/project.xml"
      goals="site"
      banner="Building site:"
      ignoreFailures="false" />
  </goal>

  <goal name="project-clean" 
    description="Build the distribution." >
    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      excludes="site/*.*"
      goals="clean"
      banner="Cleaning:"
      ignoreFailures="false" />
    <attainGoal name="clean"/>
  </goal>


</project>
