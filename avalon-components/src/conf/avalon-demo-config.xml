<?xml version="1.0"?>
<!--
                                README!

    All blocks have full defaults so nothing is needed to make them run.

-->
<config>

  <!-- The Storage block -->
  <objectstorage>
      <repositories>
        <repository class="org.apache.avalon.cornerstone.blocks.masterstore.File_Persistent_Object_Repository">
          <protocols>
            <protocol>file</protocol>
          </protocols>
          <types>
            <type>OBJECT</type>
          </types>
          <models>
            <model>SYNCHRONOUS</model>
            <model>ASYNCHRONOUS</model>
            <model>CACHE</model>
          </models>
        </repository>
        <repository class="org.apache.avalon.cornerstone.blocks.masterstore.File_Persistent_Stream_Repository">
          <protocols>
            <protocol>file</protocol>
          </protocols>
          <types>
            <type>STREAM</type>
          </types>
          <models>
            <model>SYNCHRONOUS</model>
            <model>ASYNCHRONOUS</model>
            <model>CACHE</model>
          </models>
        </repository>
      </repositories>
  </objectstorage>
   
  <sockets>
      <server-sockets>
        <factory name="plain"
                 class="org.apache.avalon.cornerstone.blocks.sockets.DefaultServerSocketFactory" />
        <!--
        <factory name="ssl" 
                 class="org.apache.avalon.cornerstone.blocks.sockets.TLSServerSocketFactory">
          <keystore>
            <file>conf/keystore</file> 
            <password>secret</password> 
            <type>JKS</type> 
            <protocol>TLS</protocol> 
            <algorithm>SunX509</algorithm> 
            <authenticate-client>false</authenticate-client> 
          </keystore>
        </factory>
        -->
      </server-sockets>

      <client-sockets>
        <factory name="plain" 
                 class="org.apache.avalon.cornerstone.blocks.sockets.DefaultSocketFactory" />
      </client-sockets>
  </sockets>

  <helloworldserver>
      <port>8999</port>
      <bind>127.0.0.1</bind>
      <helloworldhandler>
        <connectiontimeout>360000</connectiontimeout>
      </helloworldhandler>
  </helloworldserver>

  <httpproxyserver-Auditing>
      <listen-port>9997</listen-port>
      <bind>127.0.0.1</bind>
      <httpproxyhandler-Auditing>
        <connectiontimeout>360000</connectiontimeout>
      </httpproxyhandler-Auditing>
  </httpproxyserver-Auditing>
    
  <httpproxyserver-Filtering>
      <listen-port>9998</listen-port>
      <fforward-to-another-proxy>localhost:9997</fforward-to-another-proxy>  
      <bind>127.0.0.1</bind>
      <httpproxyhandler-Filtering>
        <connectiontimeout>360000</connectiontimeout>
      </httpproxyhandler-Filtering>
          
      <blocked-domains>
        <blocked-domain domain-name="doubleclick.net" />
        <blocked-domain domain-name="akamai.net" />
      </blocked-domains>
      <cookies-allowed-domains>
        <cookies-allowed-domain domain-name="yahoo.co.uk" />
        <cookies-allowed-domain domain-name="yahoo.com" />
      </cookies-allowed-domains>              
  </httpproxyserver-Filtering>

  <demoblock>
    <!-- Note trailing file searator in destinationURL -->
      <repository destinationURL="file://var/demo/" type="OBJECT" model="SYNCHRONOUS"/>
      <port>4556</port>
  </demoblock>

  <xcommander-server>
	  <port>4557</port>
  </xcommander-server>

</config>