<?xml version="1.0"?>

<!--
==============================================================================

 Phoenix build file to generate BlockInfo from Javadoc tags

Authors:
 Peter Donald <peter@apache.org>

Legal:
  Copyright (c) 2002 The Apache Software Foundation. All Rights Reserved.

==============================================================================
-->

<project default="main" basedir=".">

  <property name="src.base" value="src"/>
  <property name="java.dir" value="${src.base}/java"/>
  <property name="lib.dir" value="lib"/>

  <!-- directory where you place generated code -->
  <property name="gen.dir" value="gen"/>

  <path id="project.class.path">
    <pathelement path="${java.class.path}" />
    <fileset dir="${lib.dir}">
      <include name="*.jar" />
    </fileset>
  </path>

  <!-- Main target -->
  <target name="main" depends="xdoclet" />

  <target name="check-uptodate">
    <!--
    <uptodate property="xdoclet.uptodate" targetfile="${gen.dir}/${antlib.descriptor}" >
      <srcfiles dir= "${java.dir}" includes="${antlib.include}/*.java"/>
    </uptodate>
    -->
  </target>

  <!-- runs xdoclet if need be -->
  <target name="xdoclet" depends="check-uptodate" unless="xdoclet.uptodate">
    <taskdef name="xdoclet" classname="xdoclet.DocletTask" classpathref="project.class.path"/>

    <xdoclet sourcepath="${java.dir}" destdir="${gen.dir}" classpathref="project.class.path">
      <fileset dir="${java.dir}">
        <include name="org/apache/avalon/cornerstone/blocks/connection/*.java"/>
      </fileset>
      <template templateFile="${manifest.dir}/blockinfo-template.xml"
                destinationfile="{0}.xml"
                ofType="org.apache.avalon.phoenix.Block"
                extent="hierarchy"/>
 
      <!--
      <template templateFile="${manifest.dir}/manifest-template.mf"
                destinationfile="cornerstone.mf"/>
      -->
    </xdoclet>
  </target>

</project>
