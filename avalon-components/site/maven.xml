<project default="build" xmlns:maven="jelly:maven" xmlns:j="jelly:core" xmlns:util="jelly:util"   xmlns:ant="jelly:ant">

  <preGoal name="site">
    <attainGoal name="license"/>
    <attainGoal name="xjavadoc"/>
  </preGoal>

  <goal name="xjavadoc">
    <mkdir dir="${basedir}/target/docs/api" />
    <property name="copyright"
      value="Copyright &amp;copy; ${year} ${pom.organization.name}. All Rights Reserved." />
    <property name="title" value="${pom.name} ${pom.currentVersion} API"/>
    <javadoc destdir="${basedir}/target/docs/api" 
	doctitle="&lt;h1&gt;Cornerstone API&lt;/h1&gt;" 
      noindex="false" author="true" use="true"
	windowtitle="${title}" 
      bottom="${copyright}"
      additionalparam="-breakiterator -J-Xmx128m "
      packagenames="*,org.*">
        <j:forEach var="packageGroup" items="${pom.packageGroups}">
      	  <group title="${packageGroup.title}" packages="${packageGroup.packages}"/>
        </j:forEach>
        <sourcepath path="${basedir}/../threads/api/src/java"/>
        <sourcepath path="${basedir}/../threads/impl/src/java"/>
        <classpath>
          <path refid="maven.dependency.classpath"/>
	  </classpath>
	  <link href="${sun.j2se.link}" />
	  <link href="${avalon.logkit.link}" />
	  <link href="${avalon.framework.link}" />
	  <link href="${excalibur.thread.link}" />
	  <link href="${excalibur.event.link}" />
    </javadoc>
  </goal>

</project>
