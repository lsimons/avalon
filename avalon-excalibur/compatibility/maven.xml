<?xml version="1.0"?>

<project default="java:jar"
    xmlns:j="jelly:core"
    xmlns:ant="jelly:ant">

    <property file="${basedir}/project.properties"/>

    <!-- ==========================================================
          Compilation
         ========================================================== -->

    <postGoal name="java:compile">
        <attainGoal name="excalibur:rmi-compile"/>
    </postGoal>

    <goal name="excalibur:rmi-compile"
            description="Compiles the RMI stubs">

        <rmic base="${maven.build.dest}"
            classname="org.apache.avalon.excalibur.naming.rmi.server.RMINamingProviderImpl"
            stubVersion="1.2">
            <classpath>
                <path refid="maven.dependency.classpath"/>
            </classpath>
            <exclude name="**/test/**"/>
        </rmic>

        <!-- after this, other maven functionality should
             mostly work as normal... -->
    </goal>


</project>
