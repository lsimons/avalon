<components>
	<component
		logger="factory"
		role="org.apache.excalibur.event.socket.tcp.AsyncServerSocketFactory"
		id="factory"
		class="org.apache.excalibur.event.socket.tcp.DefaultAsyncServerSocketFactory"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler">
	</component> 
	<component
		logger="handler"
		role="org.apache.excalibur.event.seda.example3.HttpRequestHandler"
		id="handler"
		class="org.apache.excalibur.event.seda.example3.DefaultHttpRequestHandler"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler"
		file-dir="C:/Program Files/Apache Tomcat 4.0/webapps/ROOT" >
	</component> 
	<component
	    logger="selector"
		role="org.apache.excalibur.nbio.AsyncConnectionManager"
		id="selector"
		class="org.apache.excalibur.nbio.NIOAsyncConnectionManager"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler">
	</component> 
	<component
	    logger="server-socket"
		role="org.apache.excalibur.event.socket.tcp.AsyncServerSocketHandler"
		id="server-socket"
		class="org.apache.excalibur.event.socket.tcp.DefaultAsyncServerSocketHandler"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler">
			<sinks write-sink="write-stage" read-sink="read-stage" listen-sink="listen-stage" />
	</component> 
	<component
	    logger="socket"
		role="org.apache.excalibur.event.socket.tcp.AsyncSocketHandler"
		id="socket"
		class="org.apache.excalibur.event.socket.tcp.DefaultAsyncSocketHandler"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler">
			<sinks write-sink="write-stage" read-sink="read-stage" listen-sink="listen-stage" />
	</component> 
	<component
	    logger="connector"
		role="org.apache.excalibur.event.socket.http.HttpConnectorHandler"
		id="connector"
		class="org.apache.excalibur.event.socket.http.DefaultHttpConnectorHandler"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler">
			<sinks handler-sink="server-stage" />
	</component> 
	<component
	    logger="connector-factory"
		role="org.apache.excalibur.event.socket.http.HttpConnectorFactory"
		id="connector-factory"
		class="org.apache.excalibur.event.socket.http.DefaultHttpConnectorFactory"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler">
	</component> 
 	<component
	    logger="manager"
		role="org.apache.excalibur.event.seda.StageManager"
		id="manager"
		class="org.apache.excalibur.event.seda.DefaultStageManager"
		handler="org.apache.excalibur.fortress.handler.ThreadSafeComponentHandler"
			
			thread-manager="TPC" 
			processors="1" 
			threads="1" >
 
		     <stage name="handler-stage">
		       <handlers>
		         <service role="org.apache.excalibur.event.seda.example3.HttpRequestHandler">
		       	   <handler interface="org.apache.excalibur.event.seda.example3.HttpRequestHandler" />
		         </service>
		       </handlers>
	           <queue type="VARIABLE" />
		     </stage>

		     <stage name="write-stage">
		       <handlers>
		         <service role="org.apache.excalibur.event.socket.tcp.AsyncSocketHandler">
		       	   <handler signature="close" type="org.apache.excalibur.event.socket.CloseRequest" />
		       	   <handler signature="connect" type="org.apache.excalibur.event.socket.tcp.ConnectRequest" />
		       	   <handler signature="flush" type="org.apache.excalibur.event.socket.FlushRequest" />
		       	   <handler signature="write" type="org.apache.excalibur.nbio.AsyncSelection" />
		       	   <handler signature="startWrite" type="org.apache.excalibur.event.socket.WriteRequest" />
		         </service>
		       </handlers>
	           <queue type="VARIABLE" />
		       <sink-map> 
		         <sink stage-name="write-stage"/>
		         <sink stage-name="read-stage"/>
		         <sink stage-name="listen-stage"/>
		       </sink-map> 
		     </stage>
		     
		     <stage name="read-stage">
		       <handlers>
		         <service role="org.apache.excalibur.event.socket.tcp.AsyncSocketHandler">
		       	   <handler signature="close" type="org.apache.excalibur.event.socket.CloseRequest" />
		       	   <handler signature="read" type="org.apache.excalibur.nbio.AsyncSelection" />
		       	   <handler signature="startRead" type="org.apache.excalibur.event.socket.ReadRequest" />
		         </service>
		       </handlers>
	           <queue type="VARIABLE" />
		       <sink-map> 
		         <sink stage-name="write-stage"/>
		         <sink stage-name="read-stage"/>
		         <sink stage-name="listen-stage"/>
		       </sink-map> 
		     </stage>
		   
		     <stage name="listen-stage">
		       <handlers>
		         <service role="org.apache.excalibur.event.socket.tcp.AsyncServerSocketHandler">
		           <handler interface="org.apache.excalibur.event.socket.tcp.AsyncServerSocketHandler" />
		         </service>
		       </handlers>
	           <queue type="VARIABLE" />
		       <sink-map> 
		         <sink stage-name="write-stage"/>
		         <sink stage-name="read-stage"/>
		         <sink stage-name="listen-stage"/>
		       </sink-map> 
		     </stage>
		     
		     <stage name="server-stage">
		       <handlers>
		         <service role="org.apache.excalibur.event.socket.http.HttpConnectorHandler">
		       	   <handler interface="org.apache.excalibur.event.socket.http.HttpConnectorHandler" />
		         </service>
		       </handlers>
	           <queue type="VARIABLE" />
		       <sink-map> 
		         <sink stage-name="server-stage"/>
		       </sink-map> 
		     </stage>
		   
 	</component>
</components>
