<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--*** This is a generated file.  Do not edit.  ***-->
<link rel="stylesheet" href="../skin/tigris.css" type="text/css">
<link rel="stylesheet" href="../skin/mysite.css" type="text/css">
<link rel="stylesheet" href="../skin/site.css" type="text/css">
<link media="print" rel="stylesheet" href="../skin/print.css" type="text/css">
<title>BlockInfo Specification</title>
</head>
<body bgcolor="white" class="composite">
<!--================= start Banner ==================-->
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" summary="banner" border="0">
<tbody>
<tr>
<!--================= start Group Logo ==================-->
<td align="left">
<div class="groupLogo">
<a href="http://avalon.apache.org/"><img border="0" class="logoImage" alt="Apache Avalon-Phoenix" src="../images/apache-avalon-logo.png"></a>
</div>
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td align="right">
<div class="projectLogo">
<a href="http://apachecon.com/2003/US/index.html"><img border="0" class="logoImage" alt="Visit ApacheCon 2003!" src="http://www.apache.org/~ceki/ac2003/ac2003-150.gif"></a>
</div>
</td>
<!--================= end Project Logo ==================-->
</tr>
</tbody>
</table>
</div>
<!--================= end Banner ==================-->
<!--================= start Main ==================-->
<table width="100%" cellpadding="0" cellspacing="0" border="0" summary="nav" id="breadcrumbs">
<tbody>
<!--================= start Status ==================-->
<tr class="status">
<td>
<!--================= start BreadCrumb ==================--><a href="http://www.apache.org/">Apache Main</a> | <a href="http://avalon.apache.org/">Avalon Main</a> | <a href="../">Up</a>
<!--================= end BreadCrumb ==================--></td><td id="tabs">
<!--================= start Tabs ==================-->
<div class="tab">
<span class="unselectedTab"><a href="http://www.apache.org/">Apache</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/">Avalon</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/product/framework/">Framework</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/product/containers/">Containers</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/product/components/">Components</a></span>
</div>
<!--================= end Tabs ==================-->
</td>
</tr>
</tbody>
</table>
<!--================= end Status ==================-->
<table id="main" width="100%" cellpadding="8" cellspacing="0" summary="" border="0">
<tbody>
<tr valign="top">
<!--================= start Menu ==================-->
<td id="leftcol">
<div id="navcolumn">
<div class="menuBar">
<div class="menu">
<span class="menuLabel">Essentials</span>

<div class="menuItem">
<a href="../index.html">Overview</a>
</div>

<div class="menuItem">
<a href="../features.html">Features</a>
</div>

<div class="menuItem">
<a href="../getting-started.html">Getting started</a>
</div>

<div class="menuItem">
<a href="http://avalon.apache.org/bindownload.cgi">Download</a>
</div>

<div class="menuItem">
<a href="../install.html">Install</a>
</div>

</div>
<div class="menu">
<span class="menuLabel">Guide</span>

<div class="menuItem">
<a href="../guide-architecture.html">Architectural Overview</a>
</div>

<div class="menuItem">
<a href="../guide-roles.html">Development Roles</a>
</div>

<div class="menuItem">
<a href="../guide-administrator.html">for Administrators</a>
</div>

<div class="menuItem">
<a href="../guide-deployers.html">for Deployers</a>
</div>

<div class="menuItem">
<a href="../assemblers/index.html">for Assemblers</a>
</div>

<div class="menuItem">
<a href="../bdg/index.html">for Block Developers</a>
</div>

<div class="menuItem">
<a href="../mx/index.html">Management Guide</a>
</div>

<div class="menuItem">
<a href="../guide-example-configuration.html">Example configuration</a>
</div>

<div class="menuItem">
<a href="../guide-punit.html">PUnit unit testing</a>
</div>

</div>
<div class="menu">
<span class="menuLabel">Reference</span>

<div class="menuItem">
<a href="../api/index.html">API Docs</a>
</div>

<div class="menuItem">
<a href="../assemblers/config-xml-specification.html">config.xml Specification</a>
</div>

<div class="menuItem">
<a href="../assemblers/assembly-xml-specification.html">assembly.xml Specification</a>
</div>

<div class="menuItem">
<a href="../assemblers/environment-xml-specification.html">environment.xml Specification</a>
</div>

<div class="menuItem">
<span class="menuSelected">BlockInfo Specification</span>
</div>

</div>
<div class="menu">
<span class="menuLabel">For Developers</span>

<div class="menuItem">
<a href="../changes.html">Changes</a>
</div>

<div class="menuItem">
<a href="http://avalon.apache.org/code-standards.html">Coding standards</a>
</div>

<div class="menuItem">
<a href="../for-developers-project-structure.html">Project Structure</a>
</div>

<div class="menuItem">
<a href="http://jakarta.apache.org/site/cvsindex.html">CVS Repositories</a>
</div>

<div class="menuItem">
<a href="http://jakarta.apache.org/site/mail.html">Mailing Lists</a>
</div>

<div class="menuItem">
<a href="http://nagoya.apache.org/bugzilla/buglist.cgi?bug_status=UNCONFIRMED&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=RESOLVED&product=Avalon&component=Phoenix">TODO</a>
</div>

<div class="menuItem">
<a href="http://jira.werken.com/secure/BrowseProject.jspa?id=10081">Issue Tracker (Bug and Enhancement List)</a>
</div>

<div class="menuItem">
<a href="../for-developers-alternate-kernel.html">Alternate Kernels</a>
</div>

</div>
</div>
</div>
</td>
<!--================= end Menu ==================-->
<!--================= start Content ==================--><td>
<div id="bodycol">
<div class="app">
<div align="center">
<h1>BlockInfo Specification</h1>
</div>
<div class="h3">
    

    
        
<div class="h3">
<h3>The BlockInfo File</h3>
</div>
            
<p>
                The BlockInfo file defines meta-information about a block, such
                as which services the block depends upon, and which services it
                can offer to other blocks.
            </p>

            
<p>
                The BlockInfo file is an XML file.  It must be located in the same jar
                file as the block's implementing class.  It must have the same name
                as the block's class, with the extention <span class="codefrag">.xinfo</span>.  Thus,
                if you were looking up the BlockInfo for a block of class
                <span class="codefrag">com.biz.cornerstone.blocks.MyBlock</span>, you would look up the
                resource <span class="codefrag">com/biz/cornerstone/blocks/MyBlock.xinfo</span> in the
                jar file containing the block.
            </p>

            
<p>
                Below is an example BlockInfo file:
            </p>
            
<pre class="code">

&lt;?xml version="1.0"?&gt;

&lt;blockinfo&gt;

    &lt;block&gt;
        &lt;version&gt;1.2.3&lt;/version&gt;
    &lt;/block&gt;

    &lt;services&gt;
        &lt;service name="com.biz.cornerstone.services.MyService"
                 version="2.1.3" /&gt;
    &lt;/services&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;role&gt;com.biz.cornerstone.services.Authorizer&lt;/role&gt;
            &lt;service name="com.biz.cornerstone.service.Authorizer"
                     version="1.2"/&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;!-- note that role is not specified and defaults
                 to name of service. The service version is not
                 specified and it defaults to "1.0" --&gt;
            &lt;service name="com.biz.cornerstone.service.RoleMapper"/&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

&lt;/blockinfo&gt;
            </pre>

            
<p>
                You will notice that the information in the BlockInfo file is separated
                into three main sections:
            </p>
            
<ul>
                
<li>The <span class="codefrag">&lt;block&gt;</span> element, which defines the name and version of the block.</li>
                
<li>The <span class="codefrag">&lt;services&gt;</span> element, which defines the services the block provides.</li>
                
<li>The <span class="codefrag">&lt;dependencies&gt;</span> element, which defines the services the block uses.</li>
            
</ul>
        

        
<div class="h3">
<h3>The &lt;block&gt; Element</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;block&gt;</span> element specifies the name and version
                of the block.  The <span class="codefrag">&lt;block&gt;</span> element includes
                the following nested elements:
            </p>
            
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                
<tr class="b">
<th colspan="1" rowspan="1">Element</th><th colspan="1" rowspan="1">Description</th>
</tr>
                
<tr class="a">
                    
<td colspan="1" rowspan="1"><span class="codefrag">&lt;name&gt;</span></td>
                    <td colspan="1" rowspan="1">A descriptive name for the block.  Optional.</td>
                
</tr>
                
<tr class="b">
                    
<td colspan="1" rowspan="1"><span class="codefrag">&lt;version&gt;</span></td>
                    <td colspan="1" rowspan="1">
                        The version of the block.  Must be of the format
                        major.minor.micro, where minor and micro are optional.
                    </td>
                
</tr>
                
<tr class="a">
                    
<td colspan="1" rowspan="1"><span class="codefrag">&lt;schema-type&gt;</span></td>
                    <td colspan="1" rowspan="1">
                        The type of configuration schema provided with the block.
                        Possible values depend on the Configuration Validator
                        that Phoenix is using.  This value is ignored by the
                        default Configuration Validator.  Optional.
                    </td>
                
</tr>
            
</table>
        

        
<div class="h3">
<h3>The &lt;services&gt; Element</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;services&gt;</span> element defines the services
                that the block can offer to other blocks.  This element is optional;
                A block can choose to not offer any services to other blocks.
            </p>
            
<p>
                The <span class="codefrag">&lt;services&gt;</span> element should contain a
                nested <span class="codefrag">&lt;service&gt;</span> element for each service
                that the block provides.  The <span class="codefrag">&lt;service&gt;</span>
                element takes the following attributes:
            </p>
            
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                
<tr class="b">
<th colspan="1" rowspan="1">Name</th><th colspan="1" rowspan="1">Description</th>
</tr>
                
<tr class="a">
                    
<td colspan="1" rowspan="1">name</td>
                    <td colspan="1" rowspan="1">
                        The service name.  This is the fully qualified name of
                        the service interface.  The block must implement this
                        interface.  The service name is also used to identify
                        the service in the BlockInfo files of blocks that use
                        the service (see below).
                    </td>
                
</tr>
                
<tr class="b">
                    
<td colspan="1" rowspan="1">version</td>
                    <td colspan="1" rowspan="1">
                        The version of the service.  This must be of the form
                        major.minor.micro, where minor and micro are optional.
                        Default value is 1.0.
                    </td>
                
</tr>
            
</table>
        

        
<div class="h3">
<h3>The &lt;dependencies&gt; Element</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;dependencies&gt;</span> element defines the services
                that the block requires to operate.  Phoenix provides these
                services to the block using the <span class="codefrag">ServiceManager</span>
                passed to the block's <span class="codefrag">Serviceable.service()</span> method.
            </p>
            
<p>
                The <span class="codefrag">&lt;dependencies&gt;</span> element should contain
                a nested <span class="codefrag">&lt;dependency&gt;</span> element for each
                service that the block uses.  The <span class="codefrag">&lt;dependency&gt;</span>
                element takes the following nested elements:
            </p>

            
<div class="h4">
<h4>The &lt;service&gt; Element</h4>
</div>
                
<p>
                    The <span class="codefrag">&lt;service&gt;</span> element
                    defines the expected service.  The service element takes the following
                    attributes:
                </p>
                
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                    
<tr class="b">
<th colspan="1" rowspan="1">Name</th><th colspan="1" rowspan="1">Description</th>
</tr>
                    
<tr class="a">
                        
<td colspan="1" rowspan="1">name</td>
                        <td colspan="1" rowspan="1">
                            The service name.  This must be the fully qualified
                            name of the service interface.  The object returned
                            by the <span class="codefrag">ServiceManager</span> is guaranteed to
                            be castable to this interface.  The service name is
                            also used to identify the service in the BlockInfo
                            file of blocks that provide the service (see above).
                        </td>
                    
</tr>
                    
<tr class="b">
                        
<td colspan="1" rowspan="1">version</td>
                        <td colspan="1" rowspan="1">
                            The expected version of the service.  This must be of
                            the form major.minor.micro, where minor and micro are
                            optional.  The default value is 1.0.
                        </td>
                    
</tr>
                
</table>
            

            
<div class="h4">
<h4>The &lt;role&gt; Element</h4>
</div>
            
<p>
                The <span class="codefrag">&lt;role&gt;</span> element specifies the role that
                the service plays.  This must match the role name that the block
                supplies when it locates the service using
                <span class="codefrag">ServiceManager.lookup( role )</span>.
                The role name is also used in the
                <a href="/assemblers/assembly-xml-specification.html">Assembly File</a>,
                to identify the dependency when connecting the block to the
                services it requires.  The <span class="codefrag">&lt;role&gt;</span> element
                is optional, and the role name defaults to the service name.
            </p>
        

        
<div class="h3">
<h3>The &lt;management-access-points&gt; Element</h3>
</div>
            
<p>
                The <span class="codefrag">&lt;management-access-points&gt;</span> element
                defines the management interfaces that the block provides.
                These interfaces are exported by Phoenix's management system
                to allow the block to be managed.
            </p>
            
<p>
                The <span class="codefrag">&lt;management-access-points&gt;</span> element must
                contain a <span class="codefrag">&lt;service&gt;</span> element for each of the
                block's management interfaces.  The <span class="codefrag">&lt;service&gt;</span>
                element takes the following attributes:
            </p>
            
<table class="ForrestTable" cellspacing="1" cellpadding="4">
                
<tr class="b">
<th colspan="1" rowspan="1">Name</th><th colspan="1" rowspan="1">Description</th>
</tr>
                
<tr class="a">
                    
<td colspan="1" rowspan="1">name</td>
                    <td colspan="1" rowspan="1">
                        The fully qualified name of the management interface.
                        The block must implement this interface.
                    </td>
                
</tr>
                
<tr class="b">
                    
<td colspan="1" rowspan="1">version</td>
                    <td colspan="1" rowspan="1">
                        The version of the management interface.  Default value
                        is 1.0
                    </td>
                
</tr>
            
</table>
        
    

<div id="authors" align="right">by&nbsp;Peter Donald</div>
</div>
</div>
</div>
</td>
<!--================= end Content ==================-->
</tr>
</tbody>
</table>
<!--================= end Main ==================-->
<!--================= start Footer ==================-->
<div id="footer">
<table summary="footer" cellspacing="0" cellpadding="4" width="100%" border="0">
<tbody>
<tr>
<!--================= start Copyright ==================-->
<td colspan="2">
<div align="center">
<div class="copyright">
              Copyright &copy; 2002-2003&nbsp;The Apache Software Foundation.. All rights reserved.
            </div>
</div>
</td>
<!--================= end Copyright ==================-->
</tr>
<tr>
<td align="left">
<!--================= start Host ==================-->
<!--================= end Host ==================--></td><td align="right">
<!--================= start Credits ==================-->
<div align="right">
<div class="credit"></div>
</div>
<!--================= end Credits ==================-->
</td>
</tr>
</tbody>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
