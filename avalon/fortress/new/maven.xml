<project default="site" xmlns:maven="jelly:maven" xmlns:j="jelly:core" xmlns:util="jelly:util" xmlns:ant="jelly:ant">

  <property file="${basedir}/build.properties"/>
  <property file="${basedir}/project.properties"/>

  <goal name="avalon:build">
    <maven:reactor
      basedir="${basedir}/.."
      includes="container/project.xml"
      excludes="new/project.xml"
      goals="jar:install"
      banner="Building:"
      ignoreFailures="false"/>
  </goal>

  <preGoal name="site">
    <attainGoal name="license"/>
    <attainGoal name="xjavadoc"/>
  </preGoal>

  <goal name="xjavadoc">
    <mkdir dir="${basedir}/target/docs/api" />
    <property name="copyright"
      value="Copyright &amp;copy; ${year} ${pom.organization.name}. All Rights Reserved." />
    <property name="title" value="${pom.name} ${pom.currentVersion} API"/>
    <javadoc destdir="${basedir}/target/docs/api" 
	doctitle="&lt;h1&gt;Avalon Framework&lt;/h1&gt;" 
      noindex="false" author="true" use="true"
	windowtitle="${title}" 
      bottom="${copyright}"
      additionalparam="-breakiterator -J-Xmx128m "
      packagenames="*,org.*">
        <sourcepath path="${basedir}/../container/src/java"/>
        <classpath>
          <path refid="maven.dependency.classpath"/>
	  </classpath>
	  <link href="${sun.j2se.link}" />
    </javadoc>
  </goal>

</project>