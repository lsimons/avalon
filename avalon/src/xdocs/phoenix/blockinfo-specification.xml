<?xml version="1.0"?>

<!DOCTYPE document SYSTEM "../dtd/document-v10.dtd">

<document>
  <header>
    <title>Block Developers Guide</title>
    <subtitle>The BlockInfo Specification</subtitle>
    <version>3.0</version>
    <authors>
      <person id="PD" name="Peter Donald" email="donaldp@apache.org"/>
    </authors>
    <abstract>
      Specifies the format of BlockInfo files and the reasons for particular aspects.
    </abstract>
  </header>
  <body>
    <s1 title="Block Metadata">
      <p>
        The meta-data about each block is stored in a BlockInfo file. The meta-data
        includes details on what version the block is, what <code>Service</code>s
        it depends upon and which <code>Service</code>s it can offer to other Blocks.
        The meta-data also has links to the location of documentation, license details,
        authors and icons. 
      </p>

      <p>
        The BlockInfo file has the same name as the Block except with the extention 
        <code>.xinfo</code>. Thus if you were looking up the meta info for a block named 
        <code>com.biz.cornerstone.blocks.MyBlock</code> you would look up the resource
        <code>com/biz/cornerstone/blocks/MyBlock.xinfo</code> in the same bar file that 
        the block was packaged in. The BlockInfo file is a simple XML format. An
        example of such a file follows.
      </p>

      <source>
<![CDATA[
<?xml version="1.0"?>

<blockinfo>

  <meta>
    <version>1.2.3</version>

    <icon>resources/myBlock-16x16.jpg</icon>
    <large-icon>resources/myBlock-32x32.jgp</large-icon>

    <documentation>http://www.biz.com/docs/blocks/myBlock.html</documentation>
    <license>http://www.biz.com/docs/blocks/myBlock-license.html</license>
    <update>http://www.biz.com/docs/blocks/myBlock-latest.bar</update>

    <contributors>
      <author name="Silent Bob" email="bob@silent.org"/>
    </contributors>

  </meta>

  <services>
    <service name="com.biz.cornerstone.services.MyService" version="2.1.3" />
  </services>

  <dependencies>
    <dependency>
      <role>com.biz.cornerstone.services.Authorizer</role>
      <service name="com.biz.cornerstone.service.Authorizer" version="1.0"/>
    </dependency>
  </dependencies>

</blockinfo>

]]>
      </source>
<!-- Things to consider adding to the blockinfo descriptor
        <homepage URL="[URLtoprojecthomepage]"/>
        <doc type="html" URL="[URLtohtmldocs]"/>
        <doc type="pdf" URL="[URLtopdfdocs]"/>
        <updates type="jar" URL="[URLtojar]"/> 
        <updates type="rpm" URL="[URLtorpm]"/> 
        <licence URL="[URLtolicence]"/>
-->
      <p>
        You will notice that the information in the BlockInfo file is separated into 
        three main sections; <code>meta</code>, <code>services</code> and 
        <code>dependencies</code>. 
      </p>
      <s2 title="BlockInfo 'meta' Section"> 
        <p>The meta section should be largely self explanatory. The icons are used to 
        support future assembly of blocks in a GUI environment. As of the time of 
        writing Atlantis currently does not require specification of this section.</p>
      </s2>
      <s2 title="BlockInfo 'services' Section">
        <p>The services section documents the services that this block can offer other
        Blocks. The service instances indicate an interface and a version. The interface
        MUST extend <code>org.apache.phoenix.Service</code>. This section is optional
        and a Block can choose to not offer any services.</p>
      </s2>
      <s2 title="BlockInfo 'dependencies' Section">
        <p>The services section documents the services that this block requires to operate.
        Required services are placed in the Blocks ComponentManager under the name
        specified by the <code>role</code> element of service. As is documented in the 
        <link href="components.html">components</link> section, the concept of Role is more
        than just a behavioural contract. A <code>Service</code> is a behavioural contract
        and thus the necessity to support the role element. In most cases however the role
        element and the name attribute of the service will be identical.</p>
      </s2>
    </s1>
  </body>
  <footer>
    <legal>
      Copyright (c) @year@ The Jakarta Apache Project All rights reserved.
      $Revision: 1.1 $ $Date: 2001/02/23 10:47:51 $
    </legal>
  </footer>
</document>